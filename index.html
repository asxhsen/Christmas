<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Christmas Surprise üéÑ</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap');

        body {
            margin: 0;
            height: 100vh;
            overflow: hidden;
            background: #220011;
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            cursor: pointer;
            touch-action: manipulation;
        }
        section {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 1.8s ease, transform 1.8s ease;
        }
        section.active {
            opacity: 1;
            pointer-events: all;
            z-index: 10;
        }

        #intro-text-container {
            text-align: center;
            padding: 15px;
        }
        #intro {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(2.4em, 10vw, 4em);
            text-shadow: 0 0 15px #ff69b4;
        }
        #ready, #tap-hint {
            font-size: clamp(1.2em, 5vw, 2em);
            text-shadow: 0 0 8px #ff69b4;
            margin-top: 15px;
            opacity: 0;
            transition: opacity 1.5s ease;
        }

        #tree-section {
            background: linear-gradient(#330022, #550044);
            justify-content: flex-start;
            padding-top: 6vh;
        }
        #tree-container {
            position: relative;
            width: 85vw;
            max-width: 320px;
            height: 60vh;
            margin: 0 auto;
            filter: drop-shadow(0 0 0 rgba(255,182,193,0));
            transition: filter 4s ease;
        }

        .tree-layer {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(to bottom, #006633, #004d26);
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
        }
        .tree-layer::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 25px;
            background: linear-gradient(to bottom, rgba(255,255,255,0.6), transparent);
            pointer-events: none;
        }
        #layer1 { width: 70px; height: 85px; bottom: 370px; }
        #layer2 { width: 120px; height: 95px; bottom: 300px; }
        #layer3 { width: 170px; height: 105px; bottom: 230px; }
        #layer4 { width: 220px; height: 115px; bottom: 160px; }
        #layer5 { width: 270px; height: 125px; bottom: 100px; }

        #trunk {
            position: absolute;
            width: 70px;
            height: 100px;
            background: #4d2600;
            border-radius: 12px;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
        }

        #ground-snow {
            position: absolute;
            bottom: -60px;
            width: 400px;
            height: 140px;
            background: radial-gradient(ellipse, white, rgba(255,255,255,0.5));
            border-radius: 50%;
            filter: blur(12px);
            left: 50%;
            transform: translateX(-50%);
        }

        .decor {
            position: absolute;
            opacity: 0;
            transition: opacity 1.5s ease, transform 1.2s ease;
            z-index: 5;
        }
        .decor.visible {
            opacity: 1;
            transform: translateY(-10px) scale(1);
        }

        .ornament {
            width: 13px; height: 13px;
            border-radius: 50%;
            box-shadow: 0 0 15px gold;
            animation: sparkle 3s infinite alternate ease-in-out;
        }
        .bell { font-size: 7.5px; filter: drop-shadow(0 0 8px gold); }
        .candy { font-size: 11.5px; filter: drop-shadow(0 0 8px white); }
        .light {
            width: 6px; height: 6px;
            border-radius: 50%;
            background: #fffbe6;
            box-shadow: 0 0 15px #fffbe6;
            animation: twinkle 3.5s infinite alternate ease-in-out;
        }
        .small-star { font-size: 7.5px; filter: drop-shadow(0 0 8px yellow); }

        @keyframes sparkle { from { box-shadow: 0 0 15px gold; } to { box-shadow: 0 0 30px yellow; } }
        @keyframes twinkle { from { opacity: 0.7; } to { opacity: 1; box-shadow: 0 0 22px #fffbe6; } }

        #star {
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 32px;
            opacity: 0;
            transition: opacity 4s ease;
            animation: starGlow 4s infinite alternate ease-in-out;
            filter: drop-shadow(0 0 20px gold);
            z-index: 20;
        }
        @keyframes starGlow {
            from { transform: translateX(-50%) scale(1) rotate(0deg); }
            to { transform: translateX(-50%) scale(1.2) rotate(12deg); }
        }

        #instruction {
            position: absolute;
            bottom: 40px;
            font-size: clamp(1.1em, 4.5vw, 1.6em);
            opacity: 0;
            transition: opacity 1.8s ease;
            text-shadow: 0 0 12px #ff69b4;
        }

        #final-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: clamp(2.4em, 9vw, 4em);
            text-shadow: 0 0 30px #ff1493, 0 0 50px #ff69b4;
            opacity: 0;
            transition: opacity 2.5s ease;
            animation: gentlePulse 3s infinite ease-in-out;
            text-align: center;
            width: 100%;
        }
        @keyframes gentlePulse {
            0% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.04); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        #message-section {
            background: linear-gradient(to bottom, #ff69b4, #ff1493, #d946ef);
            transform: translateY(100%);
            transition: transform 1.8s ease;
            z-index: 20;
        }
        #message-section.active { transform: translateY(0); }

        #message-content {
            text-align: center;
            padding: 20px 15px;
            max-width: 95%;
        }
        #message-content h1 {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(2.6em, 9vw, 4em);
            margin-bottom: 20px;
            color: #ffd700;
            text-shadow: 0 0 25px rgba(255,215,0,0.6);
            opacity: 0;
            transform: translateY(25px);
            transition: all 1.8s ease;
        }
        #message-section.active #message-content h1 { opacity: 1; transform: translateY(0); }

        #message-content p {
            font-size: clamp(1.3em, 5vw, 1.9em);
            line-height: 1.7;
            margin: 18px 0;
            color: white;
            text-shadow: 0 0 12px rgba(0,0,0,0.5);
            opacity: 0;
            transform: translateY(30px);
            transition: all 1.8s ease;
        }
        #message-section.active #message-content p:nth-child(2) { transition-delay: 0.4s; opacity: 1; transform: translateY(0); }
        #message-section.active #message-content p:nth-child(3) { transition-delay: 0.8s; opacity: 1; transform: translateY(0); }
        #message-section.active #message-content p:nth-child(4) { transition-delay: 1.2s; opacity: 1; transform: translateY(0); }
        #message-section.active #message-content p:nth-child(5) { transition-delay: 1.6s; opacity: 1; transform: translateY(0); }
        #message-section.active #message-content p:nth-child(6) { transition-delay: 2.0s; opacity: 1; transform: translateY(0); }

        #message-content .heart {
            font-size: clamp(2.5em, 10vw, 4.5em);
            margin: 40px 0;
            opacity: 0;
            animation: heartbeat 2s infinite;
            transition: opacity 2s ease 2.4s;
        }
        #message-section.active #message-content .heart { opacity: 1; }
        @keyframes heartbeat {
            0% { transform: scale(1); }
            50% { transform: scale(1.15); }
            100% { transform: scale(1); }
        }

        #gifts-section {
            background: linear-gradient(#330022, #660044);
            transform: rotateY(-90deg);
            transform-origin: left center;
            transition: transform 2.2s cubic-bezier(0.25, 0.8, 0.25, 1);
            z-index: 15;
        }
        #gifts-section.active { transform: rotateY(0); }

        #gifts-title {
            font-size: clamp(2.2em, 8vw, 3.5em);
            margin: 15px 0;
            text-shadow: 0 0 20px #ff69b4;
            opacity: 0;
            transition: opacity 1.8s ease;
        }
        #gifts-section.active #gifts-title { opacity: 1; }

        #countdown {
            font-size: clamp(1.3em, 5vw, 2em);
            margin: 20px 0;
            text-shadow: 0 0 25px #ff69b4;
            color: #ff69b4;
            opacity: 0;
            transition: opacity 1.8s ease;
        }

        #gifts-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 18px;
            padding: 15px;
            opacity: 0;
            transition: opacity 1.8s ease 0.4s;
        }
        #gifts-section.active #gifts-container { opacity: 1; }

        .gift-box {
            width: 68px;
            height: 68px;
            background: linear-gradient(135deg, #ff1493, #ff69b4);
            position: relative;
            cursor: pointer;
            border-radius: 14px;
            box-shadow: 0 6px 18px rgba(0,0,0,0.5);
            transition: transform 0.7s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        .gift-box:active { transform: scale(1.35) rotate(18deg); }

        .ribbon-v, .ribbon-h {
            position: absolute;
            background: linear-gradient(#fffbe6, #ffd700);
            border-radius: 4px;
            box-shadow: 0 0 10px #ffd700;
        }
        .ribbon-v { width: 14px; height: 85px; left: 27px; top: -8px; }
        .ribbon-h { width: 85px; height: 14px; top: 27px; left: -8px; }
        .bow {
            position: absolute;
            width: 24px;
            height: 24px;
            background: #ff69b4;
            border-radius: 50%;
            top: 22px;
            left: 22px;
            box-shadow: 0 0 12px #ff1493;
        }
        .message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255,255,255,0.96);
            color: #ff1493;
            padding: 10px 8px;
            border-radius: 14px;
            font-size: clamp(0.85em, 3.2vw, 1em);
            opacity: 0;
            transition: opacity 1.5s ease;
            pointer-events: none;
            width: 88%;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            text-align: center;
            line-height: 1.4;
        }

        canvas { position: absolute; top: 0; left: 0; pointer-events: none; z-index: 5; }
        #fireworks-canvas { z-index: 15; }
    </style>
</head>
<body>

    <!-- Background Music - File must be named exactly "christmas-bg.mp3" in the same folder -->
    <audio id="bg-music" loop preload="auto">
        <source src="christmas-bg.mp3" type="audio/mpeg">
    </audio>

    <section id="intro-section" class="active">
        <div id="intro-text-container">
            <div id="intro">Heyy</div>
            <div id="ready"></div>
            <div id="tap-hint"></div>
        </div>
    </section>

    <section id="tree-section">
        <canvas id="snow-canvas"></canvas>
        <canvas id="confetti-canvas"></canvas>
        <canvas id="fireworks-canvas"></canvas>
        <div id="tree-container">
            <div id="star">üåü</div>
            <div id="layer1" class="tree-layer"></div>
            <div id="layer2" class="tree-layer"></div>
            <div id="layer3" class="tree-layer"></div>
            <div id="layer4" class="tree-layer"></div>
            <div id="layer5" class="tree-layer"></div>
            <div id="trunk"></div>
            <div id="ground-snow"></div>
            <div id="instruction">Tap to decorate the tree üéÑ</div>
        </div>
        <div id="final-message">Merry Christmas üéÖüå≤</div>
    </section>

    <section id="message-section">
        <div id="message-content">
            <h1>For You ‚ô°</h1>
            <p>Saal bhi khatam hone ko agaya ab aur kab tak gussa kroge ji</p>
            <p>Ab to gussa thukh bhido na yawrrr</p>
            <p>And aap gadhae ho kya? how tf am i suppose to date other</p>
            <p>If my soul still yearns for you</p>
            <p>You mean a lot to me sursji</p>
            <div class="heart">üíï</div>
        </div>
    </section>

    <section id="gifts-section">
        <h1 id="gifts-title">Here are your gifts! üéÅ</h1>
        <div id="countdown"></div>
        <div id="gifts-container"></div>
    </section>

    <script>
        window.onload = function() {
            const introSection = document.getElementById('intro-section');
            const treeSection = document.getElementById('tree-section');
            const messageSection = document.getElementById('message-section');
            const giftsSection = document.getElementById('gifts-section');

            const ready = document.getElementById('ready');
            const tapHint = document.getElementById('tap-hint');
            const instruction = document.getElementById('instruction');
            const finalMessage = document.getElementById('final-message');
            const star = document.getElementById('star');
            const treeContainer = document.getElementById('tree-container');
            const countdownEl = document.getElementById('countdown');

            const snowCanvas = document.getElementById('snow-canvas');
            const confettiCanvas = document.getElementById('confetti-canvas');
            const fireworksCanvas = document.getElementById('fireworks-canvas');
            snowCanvas.width = confettiCanvas.width = fireworksCanvas.width = window.innerWidth;
            snowCanvas.height = confettiCanvas.height = fireworksCanvas.height = window.innerHeight;

            const snowCtx = snowCanvas.getContext('2d');
            const confCtx = confettiCanvas.getContext('2d');
            const fwCtx = fireworksCanvas.getContext('2d');

            const bgMusic = document.getElementById('bg-music');

            let taps = 0;
            const maxTaps = 8;
            let stage = 'intro';
            let openedGifts = 0;
            let decorations = [];

            const colors = ['#ff1493', '#ffd700', '#ff69b4', '#c0c0c0', '#ff00ff', '#ffb6c1'];

            const giftMessages = [
                "Aapka din accha jaye üåü",
                "Aap bhot acche ho ji üòä",
                "Aap bhot cute ho yawwrrr ü•∞",
                "aap bhot khash ho ji üíé",
                "Aap hamesha muskuraate raho üòÑ",
                "Aap bohot pyare ho ji üíï",
                "Aap mere liye bohot special ho ji ‚ú®",
                "aapko bhot miss krte hai ji üôÑü§ôüèª"
            ];

            // Snow
            const snowflakes = [];
            for (let i = 0; i < 40; i++) {
                snowflakes.push({
                    x: Math.random() * window.innerWidth,
                    y: Math.random() * window.innerHeight,
                    r: Math.random() * 2.5 + 1,
                    speed: Math.random() * 0.7 + 0.3
                });
            }
            function drawSnow() {
                snowCtx.clearRect(0, 0, snowCanvas.width, snowCanvas.height);
                snowCtx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                snowflakes.forEach(f => {
                    snowCtx.beginPath();
                    snowCtx.arc(f.x, f.y, f.r, 0, Math.PI * 2);
                    snowCtx.fill();
                    f.y += f.speed;
                    f.x += Math.sin(f.y / 80) * 0.5;
                    if (f.y > window.innerHeight) f.y = 0;
                });
                requestAnimationFrame(drawSnow);
            }

            // Fireworks
            const fireworks = [];
            function launchFirework() {
                const fw = {
                    x: Math.random() * fireworksCanvas.width,
                    y: fireworksCanvas.height,
                    vx: Math.random() * 3 - 1.5,
                    vy: -Math.random() * 10 - 7,
                    color: `hsl(${Math.random()*360},100%,70%)`,
                    exploded: false,
                    particles: []
                };
                fireworks.push(fw);
            }
            function drawFireworks() {
                fwCtx.clearRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);
                fireworks.forEach((fw, idx) => {
                    if (!fw.exploded) {
                        fw.x += fw.vx; fw.y += fw.vy; fw.vy += 0.2;
                        if (fw.vy >= 0) {
                            fw.exploded = true;
                            for (let i = 0; i < 60; i++) {
                                const angle = Math.random() * Math.PI * 2;
                                const speed = Math.random() * 6 + 3;
                                fw.particles.push({ x: fw.x, y: fw.y, vx: Math.cos(angle) * speed, vy: Math.sin(angle) * speed, life: 80, color: fw.color });
                            }
                        }
                        fwCtx.fillStyle = 'white'; fwCtx.fillRect(fw.x, fw.y, 4, 4);
                    } else {
                        fw.particles.forEach((p, pidx) => {
                            p.x += p.vx; p.y += p.vy; p.vy += 0.2; p.life--;
                            fwCtx.globalAlpha = p.life / 80;
                            fwCtx.fillStyle = p.color;
                            fwCtx.fillRect(p.x, p.y, 5, 5);
                            if (p.life <= 0) fw.particles.splice(pidx, 1);
                        });
                        if (fw.particles.length === 0) fireworks.splice(idx, 1);
                    }
                });
                fwCtx.globalAlpha = 1;
                if (fireworks.length > 0) requestAnimationFrame(drawFireworks);
            }

            // Confetti
            const confetti = [];
            function launchConfetti() {
                for (let i = 0; i < 80; i++) {
                    confetti.push({
                        x: Math.random() * confettiCanvas.width,
                        y: -20,
                        r: Math.random() * 8 + 5,
                        color: colors[Math.floor(Math.random() * colors.length)],
                        vx: Math.random() * 6 - 3,
                        vy: Math.random() * 5 + 3,
                        rot: Math.random() * 360,
                        rotSpeed: Math.random() * 6 - 3
                    });
                }
                drawConfetti();
            }
            function drawConfetti() {
                confCtx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
                confetti.forEach((c, i) => {
                    c.x += c.vx; c.y += c.vy; c.vy += 0.1;
                    c.rot += c.rotSpeed;
                    confCtx.save();
                    confCtx.translate(c.x, c.y);
                    confCtx.rotate(c.rot * Math.PI / 180);
                    confCtx.fillStyle = c.color;
                    confCtx.fillRect(-c.r / 2, -c.r, c.r, c.r * 2);
                    confCtx.restore();
                    if (c.y > confettiCanvas.height) confetti.splice(i, 1);
                });
                if (confetti.length > 0) requestAnimationFrame(drawConfetti);
            }

            function updateCountdown() {
                const now = new Date();
                const target = new Date('2026-01-01T00:00:00');
                const diff = target - now;
                if (diff <= 0) {
                    countdownEl.innerHTML = 'Happy New Year 2026!!! üéÜü•Ç';
                    return;
                }
                const days = Math.floor(diff / (1000*60*60*24));
                const hours = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
                const mins = Math.floor((diff % (1000*60*60)) / (1000*60));
                const secs = Math.floor((diff % (1000*60)) / 1000);
                countdownEl.innerHTML = `New Year Countdown: ${days}d ${hours}h ${mins}m ${secs}s üéâ`;
                setTimeout(updateCountdown, 1000);
            }

            // Intro animation
            setTimeout(() => {
                ready.textContent = "Ready for a surprise?";
                ready.style.opacity = 1;
            }, 1000);
            setTimeout(() => {
                tapHint.textContent = "Tap anywhere to continue";
                tapHint.style.opacity = 1;
            }, 2200);

            function createDecorations() {
                decorations = [];
                const types = ['ornament', 'bell', 'candy', 'light', 'small-star'];
                const icons = ['', 'üîî', 'üç¨', '', '‚ú®'];
                for (let i = 0; i < maxTaps * 12; i++) {
                    const div = document.createElement('div');
                    div.className = 'decor ' + types[i % 5];
                    if (types[i % 5] === 'ornament') div.style.background = colors[Math.floor(Math.random() * colors.length)];
                    if (icons[i % 5]) div.textContent = icons[i % 5];
                    treeContainer.appendChild(div);
                    decorations.push(div);
                }
            }

            function createGifts() {
                const container = document.getElementById('gifts-container');
                container.innerHTML = '';
                giftMessages.forEach(msg => {
                    const gift = document.createElement('div');
                    gift.className = 'gift-box';
                    gift.innerHTML = `
                        <div class="ribbon-v"></div>
                        <div class="ribbon-h"></div>
                        <div class="bow"></div>
                        <div class="message">${msg}</div>
                    `;
                    gift.addEventListener('click', (e) => {
                        e.stopPropagation();
                        gift.style.transform = 'scale(1.35) rotate(18deg)';
                        setTimeout(() => {
                            gift.querySelector('.message').style.opacity = 1;
                            openedGifts++;
                            if (openedGifts === giftMessages.length) {
                                setTimeout(() => {
                                    countdownEl.style.opacity = 1;
                                    updateCountdown();
                                }, 700);
                            }
                        }, 500);
                    });
                    container.appendChild(gift);
                });
            }

            // Safe music play function
            function playMusic() {
                if (bgMusic) {
                    bgMusic.volume = 0.3; // Soft background
                    bgMusic.play().catch(() => {
                        // Silent fail - normal on first load
                    });
                }
            }

            // Main click handler
            document.body.addEventListener('click', function handler(e) {
                playMusic(); // Try every tap

                if (stage === 'intro') {
                    introSection.classList.remove('active');
                    treeSection.classList.add('active');
                    drawSnow();
                    createDecorations();
                    setTimeout(() => instruction.style.opacity = 1, 700);
                    stage = 'decorating';
                } else if (stage === 'decorating' && taps < maxTaps) {
                    for (let i = 0; i < 12; i++) {
                        const index = taps * 12 + i;
                        if (decorations[index]) {
                            const dec = decorations[index];
                            dec.style.left = `${Math.random() * 70 + 15}%`;
                            dec.style.top = `${Math.random() * 75 + 10}%`;
                            setTimeout(() => dec.classList.add('visible'), i * 60);
                        }
                    }
                    taps++;
                    const progress = taps / maxTaps;
                    star.style.opacity = progress;
                    treeContainer.style.filter = `drop-shadow(0 0 ${progress * 60}px rgba(255,182,193,${progress * 0.8}))`;

                    if (taps === maxTaps) {
                        setTimeout(() => {
                            finalMessage.style.opacity = 1;
                            launchConfetti();
                            for (let i = 0; i < 20; i++) setTimeout(launchFirework, i * 200);

                            setTimeout(() => {
                                messageSection.classList.add('active');
                            }, 2800);

                            setTimeout(() => {
                                launchConfetti();
                                launchConfetti();
                                for (let i = 0; i < 50; i++) setTimeout(launchFirework, i * 80);

                                giftsSection.classList.add('active');
                                createGifts();

                                messageSection.style.opacity = '0';
                                setTimeout(() => { messageSection.style.display = 'none'; }, 2200);
                            }, 20000); // 20 seconds message
                        }, 1000);
                    }
                }
            });

            // Extra attempt after load
            setTimeout(playMusic, 1500);

            window.addEventListener('resize', () => {
                snowCanvas.width = confettiCanvas.width = fireworksCanvas.width = window.innerWidth;
                snowCanvas.height = confettiCanvas.height = fireworksCanvas.height = window.innerHeight;
            });
        };
    </script>
</body>
</html>
